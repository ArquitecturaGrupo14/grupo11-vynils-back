{
	"info": {
		"_postman_id": "67218a73-cea6-4e2d-be96-6eb97eac4e0c",
		"name": "RecordLabel Tests",
		"description": "Colección de pruebas sobre el recurso RecordLabel",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Crear un sello discográfico",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "c41f9fc2-29a7-4555-ba7a-2b578225ddd4",
						"exec": [
							"var data = JSON.parse(responseBody);",
							"postman.setGlobalVariable(\"new_id_rl\",data.id);",
							"tests[\"no genera error en el Post\"] = responseCode.code === 200;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\":\"Sony Music\"}"
				},
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/recordlabels",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"recordlabels"
					]
				},
				"description": "**Release: Paso-5**\r\n\r\nCrea un nuevo sello discográfico. El recurso solo tiene de atributo \"name\" que debe ser único. El Id es inicializado por la BD y se debe ver en la respuesta. \r\n\r\nPara la prueba, se guarda el id en una variable que será utilizada en otras peticiones de la colección.\r\n\r\n**Código http esperado: 200**"
			},
			"response": []
		},
		{
			"name": "Crear un sello discográfico 2",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "873a8c1d-5496-46c9-a73f-610ecf8fc708",
						"exec": [
							"var data = JSON.parse(responseBody);",
							"postman.setGlobalVariable(\"new_id_rl2\",data.id);",
							"tests[\"no genera error en el Post\"] = responseCode.code === 200;",
							"console.log(data.id);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"name\":\"Deca\"\n}"
				},
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/recordlabels",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"recordlabels"
					]
				},
				"description": "**Release: Paso-5**\r\n\r\nCrea otro sello discográfico. El recurso solo tiene de atributo \"name\" que debe ser único. El Id es inicializado por la BD y se debe ver en la respuesta. \r\n\r\nEste segundo sello discográfico se utiliza para probar la petición que consultar todas los sellos discográficos\r\n\r\nPara la prueba, se guarda el id en una variable que será utilizada en otras peticiones de la colección.\r\n\r\n**Código http esperado: 200**"
			},
			"response": []
		},
		{
			"name": "Crear un sello discográfico con el mismo nombre",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "eac3c237-69c1-4930-8200-7b5fc71f3222",
						"exec": [
							"tests[\"No crea con el mismo nombre\"] = responseCode.code === 412;",
							"tests[\"Mensaje correcto de error\"] = responseBody.has(\"There is a record label with the same name\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"name\":\"Deca\"\n}"
				},
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/recordlabels",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"recordlabels"
					]
				},
				"description": "**Release: Paso-5**\r\n\r\nCrea un nuevo sello discográfico pero con un nombre que ya existe. Verifica que se genera el error y el mensaje \"Ya existe un sello discográfico con el nombre\".\r\n\r\n**Código HTTP esperado: 412 Precondition failed\".**"
			},
			"response": []
		},
		{
			"name": "Crear un vinilo",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "304084ed-d326-4e9b-b66a-8c2c95b18e0b",
						"exec": [
							"var data = JSON.parse(responseBody);",
							"postman.setGlobalVariable(\"new_id_v\",data.id);",
							"tests[\"no genera error en el Post\"] = responseCode.code === 200;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"description\": \"Buscando América es el primer álbum de la banda de Rubén Blades y Seis del Solar lanzado en 1984. La producción, bajo el sello Elektra, fusiona diferentes ritmos musicales tales como la salsa, reggae, rock, y el jazz latino. El disco fue grabado en Eurosound Studios en Nueva York entre mayo y agosto de 1983.\",\n    \"recordLabel\": { \"id\": {{new_id_rl}} },\n    \"name\": \"Buscando América\",\n    \"releaseDate\": \"1984-08-01T00:00:00-05:00\",\n    \"cover\": \"\"\n}"
				},
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/vinyls",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"vinyls"
					]
				},
				"description": "**Release: Paso-5**\r\n\r\nCrea un nuevo vinilo. El Id es inicializado por la BD y se debe ver en la respuesta. \r\n\r\nPara la prueba, se guarda el id en una variable que será utilizada en otras peticiones de la colección.\r\n\r\n**Código http esperado: 200**"
			},
			"response": []
		},
		{
			"name": "Editar un sello discográfico",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d1ba3a9f-12f2-4dea-8ed8-328c08edb346",
						"exec": [
							"console.log(responseBody);",
							"var data = JSON.parse(responseBody);",
							"tests[\"No genera error en el Put\"] = responseCode.code === 200;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\": \"Sony Music USA\"\n}"
				},
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/recordlabels/{{new_id_rl}}",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"recordlabels",
						"{{new_id_rl}}"
					]
				},
				"description": "**Release: Paso-5**\r\n\r\nActualiza una un sello discográfico existente. El recurso solo tiene de atributo \"name\" que debe ser único. se envía el Id en la URL de la petición.\r\n\r\n**Código http esperado: 200**"
			},
			"response": []
		},
		{
			"name": "Editar un sello discográfico que no existe",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "b9df8d7c-f845-4e0d-b244-f10ecadbbf44",
						"exec": [
							"tests[\"No actualiza con id que no existe\"] = responseCode.code === 404;",
							"tests[\"Mensaje correcto de error\"] = responseBody.has(\"The record label with the given id was not found\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\": \"Editorial con nuevo nombre\"\n}"
				},
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/recordlabels/0",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"recordlabels",
						"0"
					]
				},
				"description": "**Release: Paso-5**\r\n\r\nActualiza un sello discográfico que no existe. \r\n\r\nPara la prueba se verifica que se genera el error y el mensaje \"El recurso /recordlabels/0 no existe.\".\r\n\r\n**Código HTTP esperado: 404**"
			},
			"response": []
		},
		{
			"name": "Obtener todas los sellos discográficos",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "75d835cf-17fb-4929-b876-886f8a88b969",
						"exec": [
							"var data= JSON.parse(responseBody);",
							"tests[\"No genera error en el Get all\"] = responseCode.code === 200;",
							"tests[\"recordlabels count\"] = data.length > 1;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/recordlabels/",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"recordlabels",
						""
					]
				},
				"description": "**Release: Paso-5**\r\n\r\nConsulta todos los sellos discográficos de la aplicación. \r\nLa petición no tiene cuerpo.\r\n\r\nPara la prueba, se verifica que el conjunto de sellos discográficos en la respuesta tenga mas de una.\r\n\r\n**Código http esperado: 200**"
			},
			"response": []
		},
		{
			"name": "Obtener un sello discográfico",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "72eef936-ea33-42c0-b849-f74c32c1e6c6",
						"exec": [
							"console.log(responseBody);",
							"var data = JSON.parse(responseBody);",
							"tests[\"No genera error en el Get\"] = responseCode.code === 200;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/recordlabels/{{new_id_rl}}",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"recordlabels",
						"{{new_id_rl}}"
					]
				},
				"description": "**Release: Paso-5**\r\n\r\nConsulta un sello discográfico de la aplicación.  \r\nLa petición no tiene cuerpo.\r\nSe envía el id del sello discográfico deseado por la URL de la petición.\r\n\r\n**Código http esperado: 200**"
			},
			"response": []
		},
		{
			"name": "Obtener un sello discográfico que no existe",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "521005a5-fdc4-4a18-9b70-ed56c3a72d2f",
						"exec": [
							"tests[\"No consulta con id que no existe\"] = responseCode.code === 404;",
							"tests[\"Mensaje correcto de error\"] = responseBody.has(\"The record label with the given id was not found\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/recordlabels/0",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"recordlabels",
						"0"
					]
				},
				"description": "**Release: Paso-5**\r\n\r\nConsulta un sello discográfico que no existe en la aplicación.  \r\n\r\nPara la prueba se verifica que se genera el error y el mensaje \"El recurso /recordlabels/0 no existe.\".\r\n\r\n**Código http esperado: 404**"
			},
			"response": []
		},
		{
			"name": "Borrar un sello discográfico con vinilos",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "b08b526a-fed6-4428-a07d-19d9bd66ed89",
						"exec": [
							"tests[\"No borra con vinilos asociados\"] = responseCode.code === 412;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/recordlabels/{{new_id_rl}}",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"recordlabels",
						"{{new_id_rl}}"
					]
				},
				"description": "**Release: Paso-5**\r\n\r\nBorra un sello discográfico existente pero con vinilos asociados. Verifica que se genera el error.\r\n\r\n**Código HTTP esperado: 412 Precondition failed\".**"
			},
			"response": []
		},
		{
			"name": "Borrar un vinilo",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "2ec74fba-bc15-4973-99bd-0c1a86a28a2e",
						"exec": [
							"tests[\"No genera error en el Delete\"] = responseCode.code === 204;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/vinyls/{{new_id_v}}",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"vinyls",
						"{{new_id_v}}"
					]
				},
				"description": "**Release: Paso-5**\n\nBorra un libro. Se envía el id del vinilo creado anteriormente.\n\n**Código HTTP esperado: 204**"
			},
			"response": []
		},
		{
			"name": "Borrar un sello discográfico",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "bbc923bd-eb17-44c4-8151-b3acec604364",
						"exec": [
							"tests[\"No genera error en el Delete\"] = responseCode.code === 204;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/recordlabels/{{new_id_rl}}",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"recordlabels",
						"{{new_id_rl}}"
					]
				},
				"description": "**Release: Paso-5**\n\nBorra un sello discográfico. Se envía el id de la entidad creada anteriormente.\n\n**Código HTTP esperado: 204**"
			},
			"response": []
		},
		{
			"name": "Borrar un sello discográfico 2",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "1c278bf6-e953-416a-8a7c-1b3d88352d43",
						"exec": [
							"tests[\"No genera error en el Delete\"] = responseCode.code === 204;"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/recordlabels/{{new_id_rl2}}",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"recordlabels",
						"{{new_id_rl2}}"
					]
				},
				"description": "**Release: Paso-5**\n\nBorra un sello discográfico. Se envía el id de la entidad creada anteriormente.\n\n**Código HTTP esperado: 204**"
			},
			"response": []
		},
		{
			"name": "Borrar un sello discográfico que no existe",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "89d81851-eeab-4e87-b483-8179a61e9ce7",
						"exec": [
							"tests[\"No borra con id que no existe\"] = responseCode.code === 404;",
							"tests[\"Mensaje correcto de error\"] = responseBody.has(\"The record label with the given id was not found\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "http://{{ip}}:{{puerto}}/recordlabels/0",
					"protocol": "http",
					"host": [
						"{{ip}}"
					],
					"port": "{{puerto}}",
					"path": [
						"recordlabels",
						"0"
					]
				},
				"description": "**Release: Paso-5**\r\n\r\nBorra un sello discográfico que no existe en la aplicación.  \r\n\r\nPara la prueba se verifica que se genera el error y el mensaje \"El recurso /recordlabels/0 no existe.\".\r\n\r\n**Código http esperado: 404**"
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "2d0e0620-f501-4edf-ac66-69de3bdf924f",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "7b78492d-c46e-4d6a-8d90-f7dc92e1d0ac",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}